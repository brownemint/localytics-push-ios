# Localytics Module

## Description

This module provides access to the Localytics SDK in Titanium.

## Accessing the localytics Module

To access this module from JavaScript, you would do the following:

	var localytics = require("pw.localytics");

The localytics variable is a reference to the Module object.

## Reference

The following methods are available

### initSession( String appKey )  

Required before using any of the following methods. Used to setup the localytics session.

* appKey: The App Key associated with the Localytics Account.

### pauseSession()  
Pause a session when the app is backgrounded.

### resumeSession()
Resume a session after the app is focused.

### registerForPush( String deviceToken )

Initialise a localytics session and register for push notifications. 
 
* deviceToken: Device UUID generated by app after it has successfully registered for Push Notifications.

### logEvent( String eventName, Object paramDictionary )

Log an event on localytics.  

* eventName: Name of the event to log  
* paramDictionary (optional): A key/value dictionary of extra content to log.

### logScreen ( String screenName )  

Log a visit to a screen to create a screen map.  

* screenName: Name of the screen visited.

## Usage

	// Require the Module
	var localytics = require("pw.localytics");
	
	// Init Session
	localytics.initSession();
	
	// Register for push
	Ti.Network.registerForPushNotifications({
		callback: function(evt){
			alert( JSON.stringify(evt.data) );
			
			// Localytics does not seem to record taps through iOS
			// So add the following if you'd like to track them
			
			var push_campaign = {};
			push_campaign["Campaign ID"] = evt.data.ll.ca;
			push_campaign["Creative ID"] = evt.data.ll.cr;
			localytics.logEvent("Localytics Push Opened",push_campaign);
		},
		error: function(evt){
			Ti.API.error( "Code: " + evt.code + " - " + evt.error );
		},
		success: function(evt){
			localytics.registerForPush( evt.deviceToken );
		},
		types: [
			Titanium.Network.NOTIFICATION_TYPE_ALERT,
			Titanium.Network.NOTIFICATION_TYPE_SOUND
		]
	});
	
	// Log a visit to the Home Screen
	localytics.logScreen("Home");
	
	// Log an App Started event with some additional information
	localytics.logEvent("App Started", {foo: "bar"});

## Author

Michael Browne  
ProductWorld (2014)  
m.browne@productworld.com

## License

TODO: Enter your license/legal information here.
